(()=>{"use strict";const u=e=>{var r=e[0]/255,t=e[1]/255,a=e[2]/255,o=Math.min(r,t,a),n=Math.max(r,t,a);let d,l,s=(n+o)/2;if(n===o)d=l=0;else{var i=n-o;switch(l=.5<s?i/(2-n-o):i/(n+o),n){case r:d=(t-a)/i+(t<a?6:0);break;case t:d=(a-r)/i+2;break;case a:d=(r-t)/i+4}d/=6}return 3===e.length?[Math.round(360*d),Math.round(100*l),Math.round(100*s)]:[Math.round(360*d),Math.round(100*l),Math.round(100*s),e[3]]},le=e=>{var r,t=e[0]/360,a=e[1]/100,o=e[2]/100;let n=0,d=0,l=0;return 0==a?n=d=l=o:(r=(e,r,t)=>(t<0&&(t+=1),1<t&&--t,t<1/6?e+6*(r-e)*t:t<.5?r:t<2/3?e+(r-e)*(2/3-t)*6:e),a=2*o-(o=o<.5?o*(1+a):o+a-o*a),n=r(a,o,t+1/3),d=r(a,o,t),l=r(a,o,t-1/3)),3===e.length?[Math.round(255*n),Math.round(255*d),Math.round(255*l)]:[Math.round(255*n),Math.round(255*d),Math.round(255*l),e[3]]},_=e=>{const r=e.replace(/\s/g,"").split(","),t=parseInt(r[0].substr(r[0].indexOf("(")+1,r[0].length)),a=parseInt(r[1]),o=parseInt(r[2]);return 4===r.length?[t,a,o,parseFloat(r[3].slice(0,-1))]:[t,a,o]},se=(e,r)=>"hsl"===r?3===e.length?r+"("+e[0]+", "+e[1]+"%, "+e[2]+"%)":r+"a("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")":3===e.length?r+"("+e[0]+", "+e[1]+", "+e[2]+")":r+"a("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")",ie=e=>{var r=e.slice(e.indexOf("(",0)+1,e.lastIndexOf(")")).split(","),e=(256|r[0]).toString(16).slice(1)+(256|r[1]).toString(16).slice(1)+(256|r[2]).toString(16).slice(1);return 3===r.length?"#"+e:"#"+e+(Math.round(255*r[3])+65536).toString(16).substr(-2)},c=(e,r)=>{4===e.length?e=pe(e,36):5===e.length&&(e=pe(e,48));var t=parseInt(e.substring(1,3),16),a=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);let n=!1;return 9===e.length&&(n=h(e)),!0===r?!1===n?"rgb("+t+", "+a+", "+o+")":"rgba("+t+", "+a+", "+o+", "+n+")":!1===n?[t,a,o]:[t,a,o,n]},h=e=>parseFloat((parseInt(e.slice(-2),16)/255).toFixed(2)),ce=(e,r)=>e+Math.round(255*Math.min(Math.max(r||1,0),1)).toString(16),w=e=>({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"})[e.toLowerCase()],p=e=>e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]&&(9===e.length&&e[7]===e[8]?84:63),pe=(e,r)=>36===r?"#"+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2):48===r?"#"+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2)+e[4].repeat(2):63===r?"#"+e[1]+e[3]+e[5]:84===r?"#"+e[1]+e[3]+e[5]+e[7]:void 0,me=r=>{if("#"===(r=r.toLowerCase())[0]){if(null===r.match(/^#[0-9a-f]+$/))return!1;var e=r.length;return 7===e?1:9===e?2:4===e?3:5===e&&4}if("rg"===r.substr(0,2))return"a"===(r=r.replace(/\s/g,"")).substr(3,1)?null!==r.match(/^rgba\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|1|0?\.?\d*?)\)$/)&&6:null!==r.match(/^rgb\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\)$/)&&5;if("hs"===r.substr(0,2))return"a"===(r=r.replace(/\s/g,"")).substr(3,1)?null!==r.match(/^hsla\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%,(0|1|0?\.?\d*?)\)$/)&&8:null!==r.match(/^hsl\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%\)$/)&&7;if(-1===r.indexOf("gradient"))return-1!==["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent"].indexOf(r)&&9;{let e=!1;return null!==r.match(/.*gradient\s*\(((?:\([^\)]*\)|[^\)\(]*)*)\)/)&&(!1===Lr&&(Lr=!0,kr=document.createElement("div"),document.body.appendChild(kr)),kr.style.background=r,e=0<kr.style.background.length&&10,kr.style.background=""),e}},ue=e=>{let r=me(e),t=[],a="";return!1!==r&&(10===r?r=!1:(tr=e,1<=r&&r<=4?(3===r?e=pe(e,36):4===r&&(e=pe(e,48)),t=u(c(e,!1)),1!==r&&3!==r||(t[3]=1)):5===r||6===r?(t=u(_(e)),5===r&&(t[3]=1)):7===r||8===r?(t=_(e),7===r&&(t[3]=1)):9===r&&("transparent"===e.toLowerCase()?(a="#000000",t=[0,0,0,0]):(a=w(e),t=u(c(a,!1),!1),t[3]=1)))),[r,t,a]},a=t=>{window.get_picker_dimensions=()=>{var e=H.getBoundingClientRect();j=parseInt(e.top+window.scrollY),P=parseInt(e.left),U=H.offsetWidth,G=H.offsetHeight,J=I.offsetWidth,ae=j,oe=G,ne=M.offsetWidth,Z=j,ee=G,re=ne};const r=([e,r,t,a])=>{te=Math.round(oe-a*oe),K=Math.round(r*(U/100)),V=Math.round(G-G*t/100),Q=Math.round(ee/(360/e)),M.style.transform="translate(-"+ne/2+"px, "+parseInt(te-ne/2)+"px)",I.style.transform="translate("+(K-J/2)+"px ,"+(V-J/2)+"px)",O.style.transform="translate(-"+re/2+"px, "+parseInt(Q-re/2)+"px)"},a=e=>{Q=Math.max(Math.min(e.pageY-Z,ee),0),O.style.transform="translate(-"+re/2+"px, "+parseInt(Q-re/2)+"px)",S[0]=Math.round(Q/ee*360),N.style.background="linear-gradient(to bottom, hsl("+S[0]+","+S[1]+"%,"+S[2]+"%), transparent)",H.style.background="hsl("+S[0]+", 100%, 50%)",I.style.background="hsl("+S[0]+","+S[1]+"%,"+S[2]+"%)",O.style.background="hsl("+S[0]+", 100%, 50%)",$.style.background="hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")",x.textContent=S[0],p()},o=e=>{K=Math.max(Math.min(e.pageX-P,U),0),V=Math.max(Math.min(e.pageY-j,G),0),S[1]=Math.round(K/U*100),S[2]=Math.round(100-V/G*100),I.style.transform="translate("+(K-J/2)+"px ,"+(V-J/2)+"px)",N.style.background="linear-gradient(to bottom, hsl("+S[0]+","+S[1]+"%,"+S[2]+"%), transparent)",I.style.background="hsl("+S[0]+","+S[1]+"%,"+S[2]+"%)",$.style.background="hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")",x.textContent=S[1]+","+S[2],p()},n=e=>{te=Math.max(Math.min(e.pageY-ae,oe),0),S[3]=parseFloat((1-te/oe).toFixed(2)),M.style.transform="translate(-"+ne/2+"px, "+parseInt(te-ne/2)+"px)",$.style.background="hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")",x.textContent=S[3],p()},d=e=>{n(e)},l=e=>{o(e)},s=e=>{a(e)},i=()=>{!0===D?(D=!1,document.removeEventListener("mousemove",d,!1)):!0===A?(A=!1,document.removeEventListener("mousemove",l,!1)):!0===X&&(X=!1,document.removeEventListener("mousemove",s,!1)),x.textContent="",x.className="",document.removeEventListener("mouseup",i,!1),h.classList.remove("picker-mousehold"),ve()},c=()=>{N.style.background="linear-gradient(to bottom, hsl("+S[0]+","+S[1]+"%,"+S[2]+"%), transparent)",H.style.background="hsl("+S[0]+", 100%, 50%)",I.style.background="hsl("+S[0]+","+S[1]+"%,"+S[2]+"%)",O.style.background="hsl("+S[0]+", 100%, 50%)",$.style.background="hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")"},p=()=>{var r=S[3]<1?S:[S[0],S[1],S[2]];if(5===W||6===W)tr=se(le(r),"rgb");else if(7===W||8===W)tr=se(r,"hsl");else{let e=!1;4<F&&F<9||S[0]!==B[0]||S[1]!==B[1]||S[2]!==B[2]?e=!0:1===F||2===F?(tr=t.substr(0,7),S[3]<1&&(tr=ce(tr,S[3]))):3===F||4===F?(tr=t.substr(0,4),S[3]<1&&(tr=ce(pe(tr,36),S[3]))):9===F&&(1===S[3]?9===W?tr="transparent"===t.toLowerCase()?R:t:1===W||2===W?tr=R:3!==W&&4!==W||(tr=pe(R,63)):tr="transparent"===t.toLowerCase()&&0===r[3]?t:ce(R,S[3])),!0===e&&(tr=ie(se(le(r),"rgb")))}L.textContent=tr,!1===W&&me(tr)},m=()=>{H.style.background="#f00",L.textContent=z,E.style.background="linear-gradient(135deg, transparent 0%, transparent 48%, red 50%, transparent 52%, transparent 100%)",$.style.background="#fff"},e=()=>{w.offsetHeight>window.outerHeight?h.style.overflowY="scroll":h.overflowY="hidden",get_picker_dimensions(),r(S)},u=e=>{!0===e?($r=!0,setTimeout(()=>document.body.classList.add("picker-no-insert"),0)):($r=!1,setTimeout(()=>document.body.classList.remove("picker-no-insert"),0))},_=e=>{e=ue(e);W=e[0],!1!==W?(S=e[1],R=e[2]):(tr="",S=Y),B=S.slice(),F=W},h=document.createElement("div"),w=document.createElement("div"),f=document.createElement("div"),g=document.createElement("p"),v=document.createElement("div"),b=document.createElement("p"),y=document.createElement("p"),$=document.createElement("span"),E=document.createElement("span"),k=document.createElement("p"),L=document.createElement("div"),x=document.createElement("div"),C=document.createElement("div"),N=document.createElement("div"),M=document.createElement("div"),T=document.createElement("div"),O=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),q=document.createElement("p"),Y=[0,0,100,1],z="INVALID COLOR VALUE";let S=[],B=[],W=!1,F=!1,R="",X=!1,A=!1,D=!1,K=0,V=0,j=0,P=0,U=0,G=0,J=0,Q=0,Z=0,ee=0,re=0,te=0,ae=0,oe=0,ne=0,de=null;window.picker_refresh=e=>{t=e,_(e),!1!==W?(E.style.background="hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")",L.textContent=tr,r(S),c()):m()},window.picker_close=()=>{(e=>{if(arr_dh.splice(arr_dh.indexOf(e.d_id),1),dh_len--,dh_len===0)window.removeEventListener("resize",ge,false)})(f),window.removeEventListener("resize",e,!1),document.body.removeChild(h),u(!1),rr=!1,ve()},"0x"===t.substr(0,2)&&(t="#"+t.substr(2,t.length)),_(t),h.id="picker-wrapper-outer",h.className="drag-head-wrapper-outer",h.addEventListener("scroll",()=>{get_picker_dimensions()},!1),w.id="picker-wrapper",w.className="drag-head-wrapper",f.id="picker-head",w.appendChild(f),g.id="picker-btn-close",g.addEventListener("click",picker_close,!1),w.appendChild(g),v.id="picker-preview-wrapper",b.id="picker-btn-add",b.addEventListener("mousedown",()=>{he([tr],[tr],Je,!1),E.style.background=tr},!1),y.id="picker-btn-replace",y.addEventListener("mousedown",()=>{var e=we(),r=e.length;let t=0;if(0<r){for(t=0;t<r;t++)Be[e[t]]=tr,We[e[t]]=!1!==W?tr:qe,$color_inputs_c[e[t]].value=!1!==W?tr:z,$color_spans[e[t]].style.background=We[e[t]];be()}},!1),E.id="picker-preview-sel",E.style.background=!1!==W?"hsla("+S[0]+","+S[1]+"%,"+S[2]+"%,"+S[3]+")":"",E.addEventListener("mousedown",()=>{""!==t&&picker_refresh(t)},!1),$.id="picker-preview-new",v.appendChild(b),v.appendChild(y),v.appendChild($),v.appendChild(E),w.appendChild(v),k.id="picker-btn-switch",k.addEventListener("mousedown",()=>{if(!1!==W){let e=!1;var r;7!==W&&8!==W||S[0]!==B[0]&&S[1]!==B[1]&&S[2]!==B[2]||(1===S[3]?1===F||9===F?(tr=t,W=F,e=!0):2===F&&(tr=t.substr(0,7),W=1,e=!0):1===F||2===F?(tr=ce(t.substr(0,7),S[3]),W=2,e=!0):9===F&&(tr=ce(R,S[3]),W=2,e=!0)),!1===e&&(r=_e(tr),W=r[0],tr=r[1]),L.textContent=tr}},!1),L.id="picker-text-switch",de=document.createElement("div"),de.id="picker-switch-wrapper",de.appendChild(k),de.appendChild(L),w.appendChild(de),x.id="picker_controls_info",w.appendChild(x),C.id="picker-controls-wrapper",N.id="alpha-slider",N.addEventListener("mousedown",e=>{D=!0,h.classList.add("picker-mousehold"),x.className="alpha",document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",i,!1),n(e)},!1),M.id="alpha-pointer",M.className="pointer",N.appendChild(M),C.appendChild(N),H.id="sat-rect",H.addEventListener("mousedown",e=>{A=!0,h.classList.add("picker-mousehold"),x.className="sat",document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",i,!1),o(e)},!1),I.id="sat-pointer",I.className="pointer",de=document.createElement("div"),H.appendChild(de),H.appendChild(I),C.appendChild(H),T.id="hue-slider",T.addEventListener("mousedown",e=>{X=!0,h.classList.add("picker-mousehold"),x.className="hue",document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",i,!1),a(e)},!1),O.id="hue-pointer",O.className="pointer",T.appendChild(O),C.appendChild(T),w.appendChild(C),q.id="picker-btn-insert",w.appendChild(q),q.addEventListener("mousedown",()=>{He.postMessage({command:"insert",insert_val:tr})},!1),window.addEventListener("resize",e,!1),!1!==W?(L.textContent=tr,c()):m(),((e,r,t,a)=>{if(typeof arr_dh==="undefined"){window.arr_dh=[];window.dh_len=0;window.dh_id=0}if(dh_len===0)window.addEventListener("resize",ge,false);e.d_id=dh_len,e.addEventListener("mousedown",fe,false),e.className="drag-head",arr_dh[dh_len]=[],arr_dh[dh_len].$el_head=e,arr_dh[dh_len].$el_drag=r,arr_dh[dh_len].$el_drag_wrapper=t,arr_dh[dh_len].custom_func_when_moved=a,arr_dh[dh_len].start_top=0,arr_dh[dh_len].start_left=0,arr_dh[dh_len].start_x=0,arr_dh[dh_len].start_y=0,arr_dh[dh_len].dragged=false,arr_dh[dh_len].is_flex_centred=false,dh_len++})(f,w,h,get_picker_dimensions),u(!0),h.appendChild(w),document.body.appendChild(h),get_picker_dimensions(),!1!==W&&r(S),ve()},m=e=>{!1===rr?(rr=!0,a(e)):picker_refresh(e)},_e=e=>{var r,t=me(e);let a="",o=-1;return 1===t||2===t?(a=c(e,!0),o=4+t):3===t?(a=pe(e,36),o=1):4===t?(a=pe(e,48),o=2):5===t||6===t?(a=se(u(_(e)),"hsl"),o=2+t):7===t||8===t?(a=ie(se(le(_(e)),"rgb")),r=p(a),o=63===r?(a=pe(a,63),3):84===r?(a=pe(a,84),4):1):9===t?o="transparent"===e.toLowerCase()?(a="#0000",1):(a=w(e),63===p(a)?(a=pe(a,63),3):1):10===t&&(o=!1),[o,a]},f=(e,r)=>{var t=e=>(7===e.length?63===p(e)&&(e=pe(e,63)):9===e.length&&84===p(e)&&(e=pe(e,84)),e),a=!0===r?Fe:r.length,o="insert-compactview"===Ge;let n,d,l=!1,s,i=0;for(i=0;i<a;i++)n=!0===r?i:r[i],l=!1,d=Be[n],1<=(s=me(d))&&s<=4?1===e?l=c(d,!0):2===e&&(l=se(u(c(d,!1)),"hsl")):5===s||6===s?0===e?l=t(ie(d)):2===e&&(l=se(u(_(d)),"hsl")):7===s||8===s?0===e?l=t(ie(se(le(_(d)),"rgb"))):1===e&&(l=se(le(_(d)),"rgb")):9===s&&(l=0===e?t(w(d)):1===e?c(w(d),!0):se(u(c(w(d),!1)),"hsl")),!1!==l&&(Be[n]=l,$color_inputs_c[n].value=l,!0==o&&($color_wrappers[n].title=Se[n]===Be[n]?Se[n]:Se[n]+": "+Be[n]));be()},he=(e,r,t,a)=>{const o=()=>{for(m=i;m<ur;m++)$color_wrappers[mr[m]].className="color-wrapper"},n=e=>{xr.style.padding=sr*dr+"px 0 "+(e-ir)*dr+"px 0"},d=window.scrollY,l=!1===Qe?Fe:ur,s=[];let i=0,c=0,p,m=0;if(c=!0===e?(e=[Xe],r=[Ae],1):e.length,0<(p=Fe+c-Re)){if(x("Limit of "+Re+" reached!",!1,!1,!1,e=>{}),c-p<1)return;e=e.slice(0,p),r=r.slice(0,p),c=p}if(!0===Qe)if(ur<1)t=0,m=0,mr=[...Array(c)].map((e,r)=>r+0),ur=c,k();else{for(-1===t?t=mr[0]:i=mr.indexOf(t),m=i;m<ur;m++)$color_wrappers[mr[m]].className="hide",mr[m]+=c;m=0;var u=[...Array(c)].map((e,r)=>r+t);mr.splice(i,0,...u),ur+=c}else-1===t&&(t=0);for(m=0;m<c;m++)s[m]=!1===me(r[m])?qe:r[m];if(Se.splice(t,0,...e),Be.splice(t,0,...r),We.splice(t,0,...s),Fe+=c,q(Fe-c,Fe,!1),"insert-compactview"===Ge)!0===Qe&&o();else if(!0===nr){var _=3*lr;if(ir===l){var h=sr;if(P(),!1===Qe)for(m=0;m<_;m++)h+m<sr&&($color_wrappers[h+m].className="hide"),$color_wrappers[sr+m].className="color-wrapper";else{for(m=0;m<_;m++)h+m<sr&&($color_wrappers[mr[sr+m]].className="hide"),$color_wrappers[mr[sr+m]].className="color-wrapper";window.scrollTo(0,d+dr*c)}}else if(!0===Qe)for(m=0;m<_;m++)$color_wrappers[mr[sr+m]].className="color-wrapper";n(l+c)}else{var w=!1===Qe?Fe:ur;if(w>Ie){if(0===dr&&F(),P(),!1===Qe)for(m=0;m<w;m++)$color_wrappers[m].className=m<sr||m>ir?"hide":"color-wrapper";else for(m=0;m<w;m++)$color_wrappers[mr[m]].className=m<sr||m>ir?"hide":"color-wrapper";n(w),xr.style.padding=sr*dr+"px 0 "+(w-ir)*dr+"px 0",window.scrollTo(0,d),A()}else!0===Qe&&o()}if(ne(t),-1===Je&&(Je=!1===Qe?0:mr[0],ve()),!0===a){0<br&&ye(!0);var a=t,f=t+c;for(m=a;m<f;m++)$color_inp_wrappers[m].className="selected",vr[br]=m,br++;Je>=a&&Je<f&&(vr.splice(vr.indexOf(Je),1),br--)}$color_inp_wrappers[Je].className="active",J(!1),U(),G(),be()},we=()=>{let e=[];return 0===br?-1!==Je&&(e[0]=Je):(e=vr.slice(),-1!==Je&&e.push(Je),e.sort((e,r)=>e-r)),e},g=()=>{const o=we(),n=o.length,d=!1===Qe?Fe:ur,l=[];if(0!==n){let e,r,t=0,a=0;if(!0===Qe){var s=mr.indexOf(o[0]),i=0;for(t=s;t<ur;t++)!1===nr&&($color_wrappers[mr[t]].className="hide"),-1!==o.indexOf(mr[t])?i++:(l[a]=mr[t]-i,a++);mr=[...mr.splice(0,s),...l],ur-=n,k()}for(e=Fe-1,r=Fe-n,a=1,t=e;t>=r;t--)$color_wrapper_main.removeChild($color_wrappers[t]),$color_inp_wrappers[o[n-a]].className="",Se.splice(o[n-a],1),Be.splice(o[n-a],1),We.splice(o[n-a],1),a++;if($color_wrappers.splice(Fe-n,n),$color_inputs_n.splice(Fe-n,n),$color_inputs_c.splice(Fe-n,n),$color_inp_wrappers.splice(Fe-n,n),$color_spans.splice(Fe-n,n),Fe-=n,!0===nr)if(d-n<=Ie)if(j(),!1===Qe)for(t=0;t<Fe;t++)$color_wrappers[t].className="color-wrapper";else for(t=0;t<ur;t++)$color_wrappers[mr[t]].className="color-wrapper";else{var c=3*lr;if(ir===d&&(sr-=n,ir-=n),!1===Qe)for(t=0;t<c;t++)$color_wrappers[sr+t].className="color-wrapper";else for(t=0;t<c;t++)$color_wrappers[mr[sr+t]].className="color-wrapper";xr.style.padding=sr*dr+"px 0 "+(d-n-ir)*dr+"px 0"}else if(!0===Qe)for(t=s;t<ur;t++)$color_wrappers[mr[t]].className="color-wrapper";d===n?Je=-1:(ne(o[0]),-1!==Je&&(Je=!1===Qe?o[0]>Fe-1?Fe-1:o[0]:s===d-1?mr[s-1]:mr[s],$color_inp_wrappers[Je].className="active")),ve(),be(),0<br&&(vr=[],br=0),U(),G()}},v=(e,r)=>{const t=[];t[0]=Se[e],t[1]=Be[e],t[2]=We[e],Se[e]=Se[r],Be[e]=Be[r],We[e]=We[r],Se[r]=t[0],Be[r]=t[1],We[r]=t[2],$color_inputs_n[e].value=Se[e],$color_inputs_c[e].value=Be[e],$color_spans[e].style.background=We[e],$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r],!0===er&&"insert-compactview"===Ge&&($color_wrappers[e].title=Se[e]===Be[e]?Se[e]:Se[e]+": "+Be[e],$color_wrappers[r].title=Se[r]===Be[r]?Se[r]:Se[r]+": "+Be[r])},b=e=>{let r=0;if(!0===e){for(er=!0,$color_wrapper_main.classList.add("sort-mode"),r=0;r<Fe;r++)$color_wrappers[r].addEventListener("mousedown",t,!1);0<br&&ye(!0)}else for(er=!1,$color_wrapper_main.classList.remove("sort-mode"),r=0;r<Fe;r++)$color_wrappers[r].removeEventListener("mousedown",t,!1)},y=e=>{var r=()=>{let e=0;if(!1===Qe&&Fe>Ie||!0===Qe&&ur>Ie){if(0===dr&&F(),!1===Qe)for(e=0;e<Fe;e++)$color_wrappers[e].title="",e>ir&&($color_wrappers[e].className="hide");else{const t=mr.slice();var r;for(e=0;e<Fe;e++)$color_wrappers[e].title="",e>ir&&(r=t.indexOf(e),t.splice(r,1),-1!==r&&($color_wrappers[e].className="hide"))}window.scrollTo(0,0),cr=-1,sr=0,ir=3*lr,V(!0===Qe&&0<ur),A()}else for(e=0;e<Fe;e++)$color_wrappers[e].title=""};let t="";"toggle-insert-edit"===e?t="edit"===Ge?"insert-listview":("insert-compactview"===Ge&&r(),"edit"):"toggle-insert-view"===e&&(t="insert-compactview"===Ge?(r(),"insert-listview"):((()=>{var e=e=>{$color_wrappers[e].title=Se[e]===Be[e]?Se[e]:Se[e]+": "+Be[e]};let r=[],t,a=0;if(Fe>Ie)if(j(),0===ur)for(a=0;a<Fe;a++)e(a),$color_wrappers[a].className="color-wrapper";else for(r=mr.slice(),a=0;a<Fe;a++)e(a),t=r.indexOf(a),r.splice(t,1),-1!==t&&($color_wrappers[a].className="color-wrapper");else for(a=0;a<Fe;a++)e(a)})(),"insert-compactview")),xr.className=t,Ge=t,Q(),ve()},o=()=>{Cr.clientWidth<360?Mr.classList.add("dropdown-ul-full-width"):Mr.classList.remove("dropdown-ul-full-width")},n=()=>{const e=e=>{y(e.currentTarget.command)},t=()=>{Nr.value=De[Ve],Nr.opened=!1,i=[],Mr.innerHTML="",Mr.classList.add("hide")},r=e=>{void 0===e.target.l_id&&t(),document.removeEventListener("mouseup",r,!1)},a=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),s=document.createElement("i");let i=[],c=null;xr=document.createElement("div"),Cr=document.createElement("div"),Nr=document.createElement("input"),Mr=document.createElement("ul"),Tr=document.createElement("p"),Or=document.createElement("div"),Hr=document.createElement("input"),Ir=document.createElement("span"),qr=document.createElement("span"),Yr=document.createElement("em"),window.btn_save_click=()=>{x("Save?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"save_palette",arr_n:Se,arr_c:Be,c_len:Fe})})},Cr.id="controls-wrapper",a.id="toggle-wrapper",n.id="edit-wrapper",d.id="edit-btn-wrapper",c=document.createElement("p"),c.id="btn-toggle-insert-edit",c.title="toggle edit options",c.command="toggle-insert-edit",c.addEventListener("mousedown",e,!1),a.appendChild(c),o.className="dropdown-wrapper",Mr.className="hide",Nr.value=De[Ve],Nr.opened=!1,Nr.title="load palette",Nr.addEventListener("mousedown",()=>{let e=0;if(!1===Nr.opened){Nr.opened=!0;var r=e=>{e.currentTarget.l_id!==Ve&&(Ve=e.currentTarget.l_id,de(!0),He.postMessage({command:"change_palette",p_cid:Ve}),Nr.value=De[Ve]),t()};for(e=0;e<Ke;e++)i[e]=document.createElement("li"),i[e].l_id=e,i[e].textContent=De[e],i[e].addEventListener("mouseup",r,!1),Mr.appendChild(i[e]);Mr.classList.remove("hide"),o.appendChild(Mr)}},!1),Nr.addEventListener("focusout",()=>{document.addEventListener("mouseup",r,!1)},!1),Nr.addEventListener("keyup",e=>{e.preventDefault();let r=0,t=0;if(27!==e.keyCode){for(r=0;r<Ke;r++)-1!==De[r].toLowerCase().indexOf(Nr.value.toLowerCase())?(i[r].className="",t++):i[r].className="hide";0===t&&Mr.classList.add("hide"),Mr.classList.remove("hide")}else{for(Nr.value=De[Ve],r=0;r<Ke;r++)i[r].className="";Mr.classList.add("hide")}},!1),o.appendChild(Nr),a.appendChild(o),c=document.createElement("p"),c.id="btn-toggle-insertview",c.title="toggle view",c.command="toggle-insert-view",c.addEventListener("mousedown",e,!1),a.appendChild(c),Tr.id="btn-filter",Tr.title="toggle filter",Tr.addEventListener("click",()=>$(!0)),a.appendChild(Tr),Or.id="filter-wrapper",Or.className="hide",Hr.addEventListener("keyup",E,!1),Or.appendChild(Hr),Cr.appendChild(a),Cr.appendChild(Or),c=document.createElement("p"),c.id="btn-add",c.title="add color",c.addEventListener("mousedown",()=>{he(!0,!0,Je,!1)},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-pm-open",c.title="open palette manager",c.addEventListener("mousedown",L,!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-texteditor",c.title="edit palette in texteditor",c.addEventListener("mousedown",()=>{He.postMessage({command:"edit_palette_in_texteditor"})},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-restore",c.title="restore palette",c.addEventListener("mousedown",()=>{x("Restore?",!0,!1,!1,e=>{!0===e&&(de(!0),He.postMessage({command:"change_palette",p_cid:Ve}))})},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-save",c.title="save palette",c.addEventListener("mousedown",btn_save_click,!1),d.appendChild(c),n.appendChild(d),Cr.appendChild(n),xr.id="main-wrapper",xr.className="hide",xr.appendChild(Cr),l.id="statusbar",qr.title="scroll to active",qr.addEventListener("click",()=>{J(!0)}),qr.appendChild(s),qr.appendChild(Yr),l.appendChild(Ir),l.appendChild(qr),xr.appendChild(l)},d=e=>{Nr.value=e},$=e=>{let r=0;if(!1===Qe)Qe=!0,Or.className="",Tr.className="active",_r=!1,Hr.focus();else{var t=()=>{for($color_wrapper_main.classList.add("hide"),r=0;r<Fe;r++)$color_wrappers[r].className="color-wrapper";$color_wrapper_main.classList.remove("hide")};if("insert-compactview"===Ge)t();else if(!0===e&&(ur<Fe&&t(),Fe>Ie)){for(0===dr&&F(),window.scrollTo(0,0),cr=0,sr=0,ir=3*lr,r=0;r<Fe;r++)$color_wrappers[r].className=r>ir?"hide":"color-wrapper";xr.style.padding="0 0 "+(Fe-ir)*dr+"px 0",!1===nr&&A()}Qe=!1,Ze="",mr=[],ur=0,_r=!1,Tr.className="",Or.className="hide",Hr.value="",U(),G()}Q(),ve()},E=()=>{let e=0;if(!1===Pr&&!1===_r&&(_r=!0,-1!==Je&&($color_inp_wrappers[Je].className="",Je=-1)),Ze=Hr.value.toLowerCase(),window.scrollTo(0,0),!0===nr&&(cr=0,sr=0,ir=3*lr),mr=[],ur=0,"insert-compactview"===Ge||"insert-compactview"!==Ge&&Fe<Ie)for(e=0;e<Fe;e++)-1!==Be[e].toLowerCase().indexOf(Ze)||-1!==Se[e].toLowerCase().indexOf(Ze)?($color_wrappers[e].className="color-wrapper",mr[ur]=e,ur++):($color_wrappers[e].className="hide",e===Je&&(Je=-1));else{for(e=0;e<Fe;e++)-1!==Be[e].toLowerCase().indexOf(Ze)||-1!==Se[e].toLowerCase().indexOf(Ze)?(mr[ur]=e,ur++):e===Je&&(Je=-1),$color_wrappers[e].className="hide";if(ur>Ie){for(e=0;e<ir;e++)$color_wrappers[mr[e]].className="color-wrapper";!1===nr&&A(),xr.style.padding="0 0 "+(ur-ir)*dr+"px 0"}else if(!0===nr&&j(),0!==ur)for(e=0;e<ur;e++)$color_wrappers[mr[e]].className="color-wrapper"}U(),G(),k(),ve()},k=()=>{0===ur?$color_wrapper_main.classList.add("filter-no-results"):$color_wrapper_main.classList.remove("filter-no-results")},L=()=>{if(!0===hr)return;const e=e=>{13===e.keyCode&&(e=e.currentTarget,t(e.value,e.add_saveas))},r=e=>{e=e.currentTarget.previousElementSibling;t(e.value,e.add_saveas)},t=(r,t)=>{r=r.trim(),!1!==d(r)&&x("Save?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"add_palette",add_saveas:t,arr_n:Se,arr_c:Be,fname:r})})},a=e=>{13===e.keyCode&&n(e.currentTarget.parentNode.t_id,e.currentTarget.value)},o=e=>{e=e.currentTarget.parentNode.t_id;n(e,h[e].value)},n=(r,t)=>{(t=t.trim()).toLowerCase()!==De[r].toLowerCase()&&!1!==d(t)&&x("Rename?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"rename_palette",p_id:r,fname:t})})},d=r=>""!==r&&(-1!==De.findIndex(e=>e.toLowerCase()===r.toLowerCase())?(x("Not possible! Name already exists!",!1,!1,!1,e=>{}),!1):!r.match(/[\\\\/:*?\'<>|]/g)||(x('Not possible! These chars are not allowed: \\ / : * ? " < > | ',!1,!1,!1,e=>{}),!1)),l=e=>{const r=e.currentTarget.parentNode.t_id;x("Delete?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"delete_palette",p_id:r})})},s=e=>{u.classList.add("hover-helper"),_[e.currentTarget.parentNode.t_id].classList.add("hover-helper-highlight")},i=e=>{u.classList.remove("hover-helper"),_[e.currentTarget.parentNode.t_id].classList.remove("hover-helper-highlight")},c=()=>{let e=0;for(e;e<Ke;e++)_[e]=document.createElement("div"),_[e].t_id=e,h[e]=document.createElement("input"),h[e].value=De[e],h[e].addEventListener("keydown",a,!1),_[e].appendChild(h[e]),f=document.createElement("p"),f.addEventListener("mousedown",o,!1),f.addEventListener("mouseenter",s,!1),f.addEventListener("mouseleave",i,!1),_[e].appendChild(f),f=document.createElement("p"),f.addEventListener("mousedown",l,!1),f.addEventListener("mouseenter",s,!1),f.addEventListener("mouseleave",i,!1),_[e].appendChild(f),u.appendChild(_[e]);_[Ve].classList.add("active")},p=document.createElement("div"),m=document.createElement("div"),u=document.createElement("div");window.pm_refresh=()=>{p.classList.add("hide");var e=_.length;let r=0;for(r;r<e;r++)u.removeChild(_[r]);_=[],h=[],c(),p.classList.remove("hide")},window.pm_close=()=>{document.body.removeChild(p),document.body.classList.remove("overflow-hidden"),hr=!1};let _=[],h=[],w=document.createElement("div"),f=null;p.id="pm-wrapper-outer",p.className="drag-head-wrapper-outer",m.id="pm-wrapper",m.className="drag-head-wrapper",u.id="pm-list-wrapper",f=document.createElement("p"),f.addEventListener("mousedown",pm_close,!1),w.id="pm-head",w.appendChild(f),m.appendChild(w),w=document.createElement("div"),f=document.createElement("input"),f.add_saveas=!0,f.addEventListener("keydown",e,!1),w.appendChild(f),f=document.createElement("p"),f.add_saveas=!0,f.addEventListener("mousedown",r,!1),w.appendChild(f),m.appendChild(w),w=document.createElement("div"),f=document.createElement("input"),f.add_saveas=!1,f.addEventListener("keydown",e,!1),w.appendChild(f),f=document.createElement("p"),f.add_saveas=!1,f.addEventListener("mousedown",r,!1),w.appendChild(f),m.appendChild(w),f=document.createElement("span"),m.appendChild(f),c(),m.appendChild(u),p.appendChild(m),document.body.classList.add("overflow-hidden"),document.body.appendChild(p),!0===rr&&picker_close(),hr=!0},x=(e,t,a,r,o)=>{const n=()=>{var e;!1!==r?""!==(e=m.value.trim())&&(o(e),s()):(o(!0),s())},d=e=>{let r=e.currentTarget.t_id;!0===t&&r===a.length-1&&(r=!1),o(r),s()},l=e=>{9===e.keyCode&&e.preventDefault(),!1===a&&13===e.keyCode&&n(),!0===t&&27===e.keyCode&&dib_cancel()},s=()=>{document.removeEventListener("keydown",l,!1),xr.removeChild(c),i.focus(),document.addEventListener("keypress",$e,!1),jr=!1},i=document.activeElement,c=document.createElement("div"),p=document.createElement("div");window.dib_cancel=()=>{o(!1),s()};let m=null,u=null,_,h=null,w=0;if(jr=!0,document.removeEventListener("keypress",$e,!1),c.id="dib-wrapper",u=document.createElement("span"),u.textContent=e,p.appendChild(u),!1!==r&&(m=document.createElement("input"),m.type="text",m.value=r.input,p.appendChild(m)),!1===a)u=document.createElement("p"),u.textContent="OK",u.addEventListener("click",n,!1),p.appendChild(u),!0===t&&(u=document.createElement("p"),u.textContent="Cancel",u.addEventListener("click",dib_cancel,!1),p.appendChild(u));else for(h=!0===t?(a.push("Cancel")," has-cancel"):"",p.className="has-options"+h,_=a.length,w=0;w<_;w++)u=document.createElement("p"),u.innerHTML=a[w],u.t_id=w,u.addEventListener("click",d,!1),p.appendChild(u);c.appendChild(p),xr.appendChild(c),p.offsetWidth<ze&&p.classList.add("dib-stretch"),i.blur(),setTimeout(()=>{document.addEventListener("keydown",l,!1)},0),!1!==r&&(m.focus(),m.select())},l=e=>{Sr=!!(e.which&&3===e.which||e.button&&2===e.button)||(!1===wr&&!1===fr&&0<br&&ye(!0),!1)},s=n=>{if(!(!0===Sr&&0<br)){let a=-1,o=0;if(!1===wr&&!1===fr)-1!==Je&&($color_inp_wrappers[Je].className=""),a=n.currentTarget.wid;else{if(!0===er)return;var d,n=n.currentTarget.wid;if(!0===wr)n===Je?($color_inp_wrappers[Je].className="",Je=-1,ve()):-1===(d=vr.indexOf(n))?-1===Je?a=n:(vr[br]=n,br++,$color_inp_wrappers[n].className="selected"):(vr.splice(d,1),br--,$color_inp_wrappers[n].className="");else{let e=0,r=0,t=!1;if(-1!==Je?n>Je?(e=!1===Qe?Je+1:mr.indexOf(Je)+1,r=!1===Qe?n:mr.indexOf(n)):n<Je?(e=!1===Qe?n:mr.indexOf(n),r=!1===Qe?Je-1:mr.indexOf(Je)-1):t=!0:a=0===br?(e=0,r=!1===Qe?n-1:mr.indexOf(n)-1,n):(1<br&&vr.sort((e,r)=>e-r),(d=!1===Qe?vr[0]:mr.indexOf(vr[0]))<n?(e=d+1,r=!1===Qe?n:mr.indexOf(n)):n<d?(e=!1===Qe?n:mr.indexOf(n),r=d-1):t=!0,d),ye(!0),!1===t)if(!1===Qe)for(o=e;o<=r;o++)$color_inp_wrappers[o].className="selected",vr[br]=o,br++;else for(o=e;o<=r;o++)$color_inp_wrappers[mr[o]].className="selected",vr[br]=mr[o],br++}}-1!==a&&(Je=a,$color_inp_wrappers[Je].className="active",ve()),G()}},i=()=>{!0===gr&&(gr=!1,wr=!1,fr=!1,$color_wrapper_main.classList.remove("multi-select"))},C=e=>{!0===Sr&&0<br||(e=e.currentTarget.wid)!==Je&&(-1!==Je&&($color_inp_wrappers[Je].className=""),Je=e,$color_inp_wrappers[Je].className="active",ve())},N=()=>{var e;!0!==Sr&&!0!==$r&&(e=Be[Je],He.postMessage({command:"insert",insert_val:e}),yr!==Je?(yr=Je,$color_wrappers[Je].className="color-wrapper ani-insert"):($color_wrappers[Je].className="color-wrapper",setTimeout(()=>$color_wrappers[Je].className="color-wrapper ani-insert",0)))},M=()=>{if(!0!==Sr){let e=[],r="",t=-1;zr!==Je&&(zr=Je,Ye.init_color=Be[Je],e=ue(Ye.init_color),Ye.csys=e[0],Ye.csys_init=e[0],Ye.arr_hsla_init=e[1]),(0<Ye.csys_init&&Ye.csys_init<5||9===Ye.csys_init)&&(7!==Ye.csys&&8!==Ye.csys||(e=ue(Be[Je])[1],e[0]===Ye.arr_hsla_init[0]&&e[1]===Ye.arr_hsla_init[1]&&e[2]===Ye.arr_hsla_init[2]&&e[3]===Ye.arr_hsla_init[3]&&(r=Ye.init_color,t=Ye.csys_init))),-1===t&&(e=_e(Be[Je]),t=e[0],r=e[1]),!1!==t&&(Be[Je]=r,$color_inputs_c[Je].value=r,Ye.csys=t)}},T=()=>{!0!==Sr&&-1!==Je&&e(Je)},O=()=>{e(Je)},e=e=>{let r=$color_inputs_n[e].value;r=-1!==r.indexOf(":")?r.replace(/\:/g,"."):r,Se[e]=r,be()},H=()=>{!0!==Sr&&-1!==Je&&r(Je)},I=e=>{13===e.keyCode&&r(Je)},r=e=>{var r=$color_inputs_c[e].value.trim();We[e]=!1===me(r)?qe:r,Be[e]=r,$color_spans[e].style.background=We[e],be()},q=(e,r,t)=>{let a="",o=!1,n=null,d=0;for(o="insert-compactview"!==Ge?(a=Fe>Ie||!0===Qe?"hide":"color-wrapper",!1):(a=!0===Qe?"hide":"color-wrapper",!0),!0===Pr?(window.$color_wrappers=[],window.$color_spans=[],window.$color_inp_wrappers=[],window.$color_inputs_n=[],window.$color_inputs_c=[],window.$color_mode_switches=[],window.$color_wrapper_main=document.createElement("div"),$color_wrapper_main.id="color-wrapper-main",$color_wrapper_main.addEventListener("contextmenu",B,!1),$color_wrapper_main.addEventListener("mousedown",l,!1)):xr.className=Ge+" hide",d=e;d<r;d++)$color_wrappers[d]=document.createElement("div"),$color_wrappers[d].wid=d,$color_wrappers[d].className=a,$color_wrappers[d].addEventListener("mousedown",i,!1),$color_wrappers[d].addEventListener("mouseup",s,!1),!0===o&&($color_wrappers[d].title=Se[d]===Be[d]?Se[d]:Se[d]+": "+Be[d]),$color_spans[d]=document.createElement("span"),$color_spans[d].addEventListener("click",N,!1),!0===t&&(We[d]=!1===me(Be[d])?qe:Be[d],$color_spans[d].style.background=We[d]),$color_inp_wrappers[d]=document.createElement("div"),$color_inputs_n[d]=document.createElement("input"),$color_inputs_n[d].wid=d,$color_inputs_n[d].addEventListener("focusin",C,!1),$color_inputs_n[d].addEventListener("focusout",T,!1),$color_inputs_n[d].addEventListener("keyup",O,!1),$color_inputs_n[d].value=Se[d],$color_inputs_c[d]=document.createElement("input"),$color_inputs_c[d].wid=d,$color_inputs_c[d].addEventListener("focusin",C,!1),$color_inputs_c[d].addEventListener("focusout",H,!1),$color_inputs_c[d].addEventListener("keyup",I,!1),$color_inputs_c[d].value=Be[d],$color_mode_switches[d]=document.createElement("p"),$color_mode_switches[d].addEventListener("click",M,!1),n=document.createElement("i"),n.addEventListener("click",g,!1),$color_inp_wrappers[d].appendChild($color_inputs_n[d]),$color_inp_wrappers[d].appendChild($color_inputs_c[d]),$color_inp_wrappers[d].appendChild($color_mode_switches[d]),$color_wrappers[d].appendChild(n),$color_wrappers[d].appendChild($color_spans[d]),$color_wrappers[d].appendChild($color_inp_wrappers[d]),$color_wrapper_main.appendChild($color_wrappers[d]);!0===Pr?(-1!==Je&&Je<Fe&&($color_inp_wrappers[Je].className="active"),G(),xr.appendChild($color_wrapper_main)):xr.className=Ge,!1===Qe&&U()},t=e=>{let r=0;for(Ar=e.currentTarget,Dr=Ar,Kr=Ar.wid,r;r<Fe;r++)$color_wrappers[r].addEventListener("mouseenter",Y,!1);document.addEventListener("mouseup",z,!1),-1!==Je&&($color_inp_wrappers[Je].className=""),Ar.className="color-wrapper drag-element",$color_inp_wrappers[Kr].className="active",Je=Kr},Y=e=>{Vr=e.currentTarget.wid,v(Vr,Kr),$color_inp_wrappers[Kr].className="",$color_inp_wrappers[Vr].className="active",Ar.className="color-wrapper",Dr=e.currentTarget,Dr.className="color-wrapper drag-element",Ar=Dr,Kr=Vr,Je=Vr},z=()=>{let e=0;for(e;e<Fe;e++)$color_wrappers[e].removeEventListener("mouseenter",Y,!1);document.removeEventListener("mouseup",z,!1),Ar.className="color-wrapper",be()},S=()=>{$color_wrapper_main.style.minHeight=je-pr-Ue-4+"px"},B=e=>{e.preventDefault();const r=()=>{const p=-1!==Je?Je:vr[0],m=me(Be[p]);!1!==m&&10!==m?x("Number of steps (2-100)?",!0,!1,{input:10},e=>{0<(e=parseInt(e))&&e<101&&(e=>{const r=[],t=[];let a=Be[p],o=!1,n=[],d=0,l=0,s,i=0,c=0;for(d=5<=m&&m<=8?(5===m||6===m?n=u(_(a)):7!==m&&8!==m||(n=_(a)),3===n.length?1/e:n[3]/e):(o=!0,2===m||4===m?(4===m&&(a=pe(a,48)),a=a.slice(0,-2),h(a)/e):(3===m?a=pe(a,36):9===m&&(a=w(a)),1/e)),i=e;0<=i;i--)l=parseFloat((d*i).toFixed(2)),0!==l&&1!==l&&(!0===o?t[c]=ce(a,l):(s=[n[0],n[1],n[2],l],5===m||6===m?t[c]=se(le(s),"rgb"):7!==m&&8!==m||(t[c]=se(s,"hsl"))),r[c]=Se[p]+" "+l.toString(),c++);if(0===ur)he(r,t,Je+1,!1);else{for(he(r,t,Je,!1),i=0;i<c;i++)v(Je+i,Je+c);be()}})(e)}):x("Not possible! Invalid color value!",!1,!1,!1,e=>{})},t=()=>{const d=we(),l=d.length;l<2?x("Not possible! Select two colors at least!",!1,!1,!1,e=>{}):x("Sort selected ...",!0,["by Name","by Value","by HUE","Reverse"],!1,e=>{!1!==e&&(t=>{const e=[];let r=[],a=!0,o,n=0;if(0===t||1===t||3===t){for(n=0;n<l;n++)r[n]=[Se[d[n]],Be[d[n]],We[d[n]]];for(0===t||1===t?r.sort((e,r)=>e[t]===r[t]?0:e[t]<r[t]?-1:1):r.reverse(),n=0;n<l;n++)Se[d[n]]=r[n][0],Be[d[n]]=r[n][1],We[d[n]]=r[n][2]}else if(2===t){for(n=0;n<l;n++)o=me(Be[d[n]]),e[n]=1<=o&&o<=4?u(c(Be[d[n]],!1)):5===o||6===o?u(_(Be[d[n]])):7===o||8===o?_(Be[d[n]]):9===o?u(c(w(Be[d[n]]),!1)):[-1];if(0===e.length)a=!1;else for(r=e.map((e,r)=>({color:e,index:r})).sort((e,r)=>e.color[0]-r.color[0]).map(e=>[Se[d[e.index]],Be[d[e.index]],We[d[e.index]]]),n=0;n<l;n++)Se[d[n]]=r[n][0],Be[d[n]]=r[n][1],We[d[n]]=r[n][2]}!0===a&&(ne(0),be(),!0===Qe&&E())})(e)})},a=()=>{var e=we();let r=0;for(Fr=[],Rr=[],Xr=e.length,r;r<Xr;r++)Fr[r]=Se[e[r]],Rr[r]=Be[e[r]]},o=()=>{let e=-1;e=-1!==Je?Je:0<br?we()[br-1]:0,he(Fr,Rr,e,!0)},n=()=>{x("Special functions:",!0,["Sort by ...","Create Alpha-Steps","Create comple&shy;mentary Color","Randomize Selected"],!1,e=>{0===e?t():1===e?r():2===e?(()=>{var e=-1!==Je?Je:vr[0],r=me(Be[e]),t=Se[e]+" complementary";let a=[],o="";!1!==r&&10!==r?(a=1<=r&&r<=4?u(c(Be[e],!1)):9===r?u(c(w(Be[e]),!1)):5===r||6===r?u(_(Be[e])):_(Be[e]),a[0]=180<a[0]?a[0]-180:a[0]+180,o=1<=r&&r<=4||9===r?ie(se(le(a),"rgb")):5===r||6===r?se(le(a),"rgb"):se(a,"hsl"),0===ur?he([t],[o],Je+1,!1):(he([t],[o],Je,!1),v(Je,Je+1),be())):x("Not possible! Invalid color value!",!1,!1,!1,e=>{})})():3===e&&(()=>{var e=we(),r=e.length;let t=0;for(t=0;t<r;t++)Se[e[t]]="Color "+(t+1),Be[e[t]]=se([Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())],"rgb"),We[e[t]]=Be[e[t]];be(),ne(0)})()})},d=()=>{document.removeEventListener("keyup",d,!1),document.removeEventListener("mouseup",d,!1),document.body.removeChild($context_ul)},l=()=>{$context_ul.style.top=e.clientY+Br<=je?e.clientY+"px":je-Br-4+"px",$context_ul.style.left=e.clientX+Wr>=Pe?Pe-Wr+"px":e.clientX+"px"},s=e.target===$color_wrapper_main;window.$context_ul=document.createElement("ul");let i=null;$context_ul.id="context-ul",i=document.createElement("li"),!(i.id="context-li-picker")==s&&!1===er?i.addEventListener("mouseup",()=>{-1!==Je?m(Be[Je]):0<br&&m(Be[vr[0]])},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-add")===er?i.addEventListener("mouseup",()=>{he(!0,!0,Je,!1)},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-duplicate")==s&&!1===er?i.addEventListener("mouseup",()=>{a(),o()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-delete")==s&&!1===er?i.addEventListener("mouseup",g,!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-select",!0===Qe&&0<ur&&!1===er||!1===Qe&&0<Fe&&!1===er?i.addEventListener("mouseup",()=>{let e=0;if(0<br&&ye(!1),!1===Qe)for(vr=[...Array(Fe)].map((e,r)=>r+0),br=Fe,e=0;e<Fe;e++)$color_inp_wrappers[e].className="selected";else for(vr=mr,br=ur,e=0;e<ur;e++)$color_inp_wrappers[mr[e]].className="selected";-1!==Je&&(vr.splice(vr.indexOf(Je),1),br--,$color_inp_wrappers[Je].className="active")},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-copy")==s&&!1===er?i.addEventListener("mouseup",()=>{a()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-cut")==s&&!1===er?i.addEventListener("mouseup",()=>{a(),g()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-paste",0<Xr&&!1===er?i.addEventListener("mouseup",o,!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-sort",i.className=!0===er?"context-li-sort-off":"context-li-sort-on",i.addEventListener("mouseup",()=>{0<br&&ye(!0),b(!1===er)},!1),$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-convert")==s&&!1===er?i.addEventListener("mouseup",()=>{x("Convert to ...",!0,["HEX","RGB","HSL"],!1,e=>{var r;!1!==e&&(r=we(),f(e,r))})},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-special")==s&&!1===er?i.addEventListener("mouseup",n,!1):i.className="context-li-disabled",$context_ul.appendChild(i),document.addEventListener("mouseup",d,!1),document.addEventListener("keyup",d,!1),0===Br?(document.body.appendChild($context_ul),Br=$context_ul.clientHeight,Wr=$context_ul.clientWidth,l()):(l(),document.body.appendChild($context_ul)),document.activeElement.blur()},W=e=>{var r=3*lr,t=!1===Qe?Fe:ur;let a=0,o=0,n=0,d=0,l=0,s=0;if(window.removeEventListener("scroll",D,!1),!1===e?(o=r,d=(t-o)*dr):(a=t-r,o=t,n=a*dr,l=document.body.scrollHeight),!1===Qe)for(s=0;s<r;s++)$color_wrappers[sr+s].className="hide",$color_wrappers[a+s].className="color-wrapper";else for(s=0;s<r;s++)$color_wrappers[mr[sr+s]].className="hide",$color_wrappers[mr[a+s]].className="color-wrapper";sr=a,ir=o,xr.style.padding=n+"px 0 "+d+"px 0",window.scrollTo(0,l),window.addEventListener("scroll",D,!1)},F=()=>{var e;0===dr&&("insert-compactview"!==Ge?(e=0===ur?0:mr[0],$color_wrappers[e].className="color-wrapper",dr=$color_wrappers[e].offsetHeight):($color_wrappers[0].classList.add("meassure-list-wrapper-height"),dr=$color_wrappers[0].offsetHeight,$color_wrappers[0].classList.remove("meassure-list-wrapper-height"))),lr=Math.ceil((je-pr)/dr),ir=3*lr},R=()=>{"insert-compactview"!==Ge&&Fe>Ie&&X()},X=()=>{let e=0;for(F(),e=0;e<ir;e++)$color_wrappers[e].className="color-wrapper";K(),A()},A=()=>{window.addEventListener("scroll",D,!1),nr=!0},D=()=>{K()},K=()=>{var e=window.scrollY,r=!0===Qe&&0<ur;let t=Math.floor(e/dr),a=0,o=0;if(t>=lr?(a=t+2*lr,t-=lr):(t=0,a=3*lr),!1==r?a>=Fe&&(a=Fe,t=Fe-3*lr):a>=ur&&(a=ur,t=ur-3*lr),e<=cr){var n=sr-t;if(!1==r)for(o=0;o<n;o++)$color_wrappers[t+o].className="color-wrapper",$color_wrappers[a+o].className="hide";else for(o=0;o<n;o++)$color_wrappers[mr[t+o]].className="color-wrapper",$color_wrappers[mr[a+o]].className="hide"}else{var d=t-sr;if(!1==r)for(o=0;o<d;o++)$color_wrappers[sr+o].className="hide",$color_wrappers[ir+o].className="color-wrapper";else for(o=0;o<d;o++)$color_wrappers[mr[sr+o]].className="hide",$color_wrappers[mr[ir+o]].className="color-wrapper"}cr=e,sr=t,ir=a,V(r)},V=e=>{xr.style.padding=!1===e?sr*dr+"px 0 "+(Fe-ir)*dr+"px 0":sr*dr+"px 0 "+(ur-ir)*dr+"px 0"},j=()=>{window.removeEventListener("scroll",D,!1),nr=!1,xr.style.padding=""},P=()=>{sr=Math.floor(window.scrollY/dr),ir=0,sr>=lr?(ir=sr+2*lr,sr-=lr):(sr=0,ir=3*lr);var e=!1===Qe?Fe:ur;ir>=e&&(ir=e,sr=e-3*lr)},U=()=>{Ir.textContent=!1===Qe?Fe+" entries":ur+" / "+Fe+" entries"},G=()=>{var e=!1===Qe?Je+1:mr.indexOf(Je)+1;0!==e?(Yr.textContent=e,qr.className=""):qr.className="hide"},J=e=>{let r=0;if(-1===Je)r=0;else if(!0===nr){var t=0===ur?Je:mr.indexOf(Je);if(!1===e&&(t<lr||t>=sr+lr&&t<=ir-lr))return;r=dr*t}else{var a=window.scrollY,t=$color_wrappers[Je].offsetTop;if(!1===e&&a<=t&&t<=a+je&&!1===e)return;r=t}window.scrollTo(0,r)},Q=()=>{pr=Cr.offsetHeight,document.body.style.paddingTop=pr+"px",S()},fe=e=>{dh_id=e.currentTarget.d_id;const r=arr_dh[dh_id],t=r.$el_drag.getBoundingClientRect();r.start_top=parseInt(t.top),r.start_left=parseInt(t.left),r.start_x=e.pageX,r.start_y=e.pageY,r.dragged=!0,"column"===window.getComputedStyle(r.$el_drag_wrapper).flexDirection&&(r.$el_drag_wrapper.style.display="block",r.is_flex_centred=!0),r.$el_drag.style.margin=0,r.$el_drag.classList.add("drag"),r.$el_drag_wrapper.classList.add("mousehold"),document.addEventListener("mousemove",Z,!1),document.addEventListener("mouseup",ee,!1),e.currentTarget.addEventListener("dblclick",te,!1),Z(e)},Z=e=>{const r=arr_dh[dh_id];r.$el_drag.style.transform="translate("+(r.start_left+e.pageX-r.start_x)+"px ,"+(r.start_top+e.pageY-r.start_y)+"px)"},ee=e=>{const r=arr_dh[dh_id];let t=r.start_left+e.pageX-r.start_x,a=r.start_top+e.pageY-r.start_y,o=!1;t>=Pe-100?(t=Pe-100,o=!0):t+r.$el_drag.offsetWidth<=100&&(t=100-r.$el_drag.offsetWidth,o=!0),a>=window.innerHeight-100?(a=window.innerHeight-100,o=!0):a<=0&&(a=0,o=!0),!0===o&&(r.$el_drag.style.transform="translate("+t+"px ,"+a+"px)"),document.removeEventListener("mousemove",Z,!1),document.removeEventListener("mouseup",ee,!1),r.$el_drag_wrapper.classList.remove("mousehold"),!1!==r.custom_func_when_moved&&r.custom_func_when_moved()},re=e=>{const r=arr_dh[e];r.$el_drag.classList.remove("drag"),r.$el_drag.style.transform=null,r.$el_drag.style.margin=null,!(r.$el_drag.dragged=!1)===r.is_flex_centred&&(r.$el_drag_wrapper.style.display="flex"),!1!==r.custom_func_when_moved&&r.custom_func_when_moved()},te=e=>{re(e.currentTarget.d_id),e.currentTarget.removeEventListener("dblclick",te,!1)},ge=()=>{let e,r=0;for(r=0;r<dh_len;r++)!0===arr_dh[r].dragged&&re(r),(e=arr_dh[r].$el_drag.getBoundingClientRect()).top>window.innerHeight-100?arr_dh[r].$el_drag.style.transform="translateY("+(window.innerHeight-100)+"px)":e.top<0&&(current_y=0,arr_dh[r].$el_drag.style.transform="translateY(0px)")},ae=()=>{window.scroll_end_timeout&&clearTimeout(window.scroll_end_timeout),window.scroll_end_timeout=setTimeout(()=>{or=window.scrollY,ve(),!0===rr&&get_picker_dimensions()},200)},oe=()=>{window.resize_timeout&&clearTimeout(window.resize_timeout),window.resize_timeout=setTimeout(()=>(()=>{Pe=window.innerWidth;var e=window.innerHeight,r=Cr.clientHeight;let t=0;if(0!==dr&&(lr=Math.ceil((e-pr)/dr)),r!==pr&&(pr=r,document.body.style.paddingTop=pr+"px"),"insert-compactview"===Ge)or=window.scrollY,ve();else if(Fe>Ie&&(lr=Math.ceil((e-pr)/dr),e>je)){for(P(),t=sr;t<ir;t++)$color_wrappers[t].className="color-wrapper";xr.style.padding=sr*dr+"px 0 "+(Fe-ir)*dr+"px 0"}o(),je=e,S()})(),20)},ne=e=>{let r=0;if("insert-compactview"!==Ge)for(r=e;r<Fe;r++)$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r];else for(r=e;r<Fe;r++)$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r],$color_wrappers[r].title=Se[r]===Be[r]?Se[r]:Se[r]+": "+Be[r]},de=e=>{!0===e?document.body.classList.add("loading"):setTimeout(()=>document.body.classList.remove("loading"),150)},ve=()=>{He.postMessage({command:"store_settings",settings:{mode_current:Ge,c_cid:Je,filter_open:Qe,filter_val:Ze,picker_open:rr,picker_color:tr,scroll_pos:or,cm_width:ar}})},be=()=>{He.postMessage({command:"store_colors",arr_n:Se,arr_c:Be,c_len:Fe})},ye=e=>{let r=0;if(!0===e)for(r=0;r<br;r++)$color_inp_wrappers[vr[r]].className="";vr=[],br=0},$e=e=>{!0===e.ctrlKey&&19===e.which&&(!0===e.shiftKey?"no-palettes"!==Ge&&btn_save_click():He.postMessage({command:"save_active_doc"}))},Ee=e=>{18!==e.keyCode?(!0===e.ctrlKey&&!1===wr&&($color_wrapper_main.classList.add("multi-select"),wr=!0),!0===e.shiftKey&&!1===fr&&($color_wrapper_main.classList.add("multi-select"),fr=!0),!0===wr&&"control"!==e.key.toLowerCase()&&(gr=!0),36===e.keyCode?(e.preventDefault(),!0===nr?W(!1):window.scrollTo(0,0)):35===e.keyCode&&(e.preventDefault(),!0===nr?W(!0):window.scrollTo(0,document.body.scrollHeight))):b(!0)},ke=e=>{18!==e.keyCode?(!(gr=!1)===wr&&($color_wrapper_main.classList.remove("multi-select"),wr=!1),!0===fr&&($color_wrapper_main.classList.remove("multi-select"),fr=!1)):b(!1)},Le=()=>{window.scrollTo(0,0),!0===nr&&(j(),cr=0,sr=0,ir=3*lr),Se=[],Be=[],We=[],Fe=0,Je=-1,mr=[],ur=0,vr=[],br=0,$color_wrappers=[],$color_spans=[],$color_inp_wrappers=[],$color_inputs_n=[],$color_inputs_c=[],$color_wrapper_main.innerHTML="",U(),G()},xe=(e,r)=>{Se=e,Be=r,Fe=Se.length,Je>Fe-1&&(Je=-1)},Ce=(e,r,t)=>{De=e,Ke=r,Ve=t},Ne=(e,r)=>{if(!0===e)return;const t=e=>{document.documentElement.style.setProperty("--cm-max-width",e+"px")},a=e=>{d.start_x=e.pageX,d.direction=e.currentTarget===s?1:-1,d.distance=0,document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",n,!1),document.body.classList.add("resizing"),"insert-compactview"===Ge&&300<(0<ur?ur:Fe)&&(Pe>document.documentElement.scrollWidth&&document.body.classList.add("has-scrollbar"),document.body.classList.add("resizing-hide-colors"))},o=e=>{e=(d.start_x-e.pageX)*d.direction;ar+e<=Pe&&200<ar+e&&(t(ar+e),d.distance=e),oe()},n=()=>{ar+=d.distance,document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",n,!1),document.body.classList.remove("resizing"),"insert-compactview"===Ge&&(document.body.classList.remove("resizing-hide-colors"),document.body.classList.remove("has-scrollbar")),ve()},d={},l=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div");l.id="resize-wrapper",s.className="resize-border left",i.className="resize-border right",s.addEventListener("mousedown",a,!1),i.addEventListener("mousedown",a,!1),l.appendChild(s),l.appendChild(i),document.body.appendChild(l),ar=r<200?200:r,document.body.classList.add("set-max-width"),t(ar)},Me=e=>{if(0<Object.entries(e).length){var r={background:"--vscode-sideBar-background",foreground:"--vscode-editor-foreground",buttonBackground:"--vscode-button-background",buttonForeground:"--vscode-button-foreground",buttonHoverBackground:"--vscode-button-hoverBackground",buttonBorder:"--vscode-input-border",inputBackground:"--vscode-input-background",inputForeground:"--vscode-input-foreground",inputBorder:"--vscode-dropdown-border",dropdownForeground:"--vscode-dropdown-foreground",dropdownBackground:"--vscode-dropdown-background",dropdownHoverBackground:"--vscode-list-hoverBackground",selectionBorder:"--cm-selection-border",popupBorder:"--cm-popup-border",overlayBackground:"--cm-overlay-background"};for(const t in e)document.documentElement.style.setProperty(r[t],e[t])}},Te=e=>{const r=()=>{je=window.innerHeight,Pe=window.innerWidth,je<1&&t<100?setTimeout(()=>{t++,r()},10):(Ge=e.settings.mode_current,Je=e.settings.c_cid,Qe=e.settings.filter_open,Ze=e.settings.filter_val,rr=e.settings.picker_open,tr=e.settings.picker_color,Re=e.c_max,Xe=e.n_new,Ae=e.c_new,Ce(e.arr_p,e.p_len,e.p_cid),xe(e.arr_n,e.arr_c),Me(e.config.styles),Ne(e.config.fullWidth,e.settings.cm_width),n(),q(0,Fe,!0),xr.className=Ge,document.body.appendChild(xr),Ue=Ir.clientHeight,o(),0!==Fe?!0===Qe?(Qe=!1,""!==Ze&&(Hr.value=Ze),$(!1),"insert-compactview"!==Ge&&Fe>Ie&&F(),E()):(Q(),"insert-compactview"!==Ge&&Fe>Ie&&X()):Q(),S(),window.addEventListener("resize",oe,!1),document.addEventListener("keydown",Ee,!1),document.addEventListener("keyup",ke,!1),document.addEventListener("keypress",$e,!1),-1!==e.settings.scroll_pos&&window.scrollTo(0,e.settings.scroll_pos),window.addEventListener("scroll",ae,!1),!0===rr&&a(tr),He.postMessage({command:"color_manager_is_ready"}),de(!1),Pr=!1)};let t=0;r()},Oe=e=>{switch(!0===jr&&dib_cancel(),e.command){case"init":Te(e);break;case"refresh":o=e,Ce(o.arr_p,o.p_len,o.p_cid),d(De[Ve]),!0===o.refresh_pm&&!0===hr&&pm_refresh(),!0===er&&(er=!1,$color_wrapper_main.classList.remove("sort-mode")),Le(),xe(o.arr_n,o.arr_c),0<Fe&&(q(0,Fe,!0),(!0===Qe?E:R)()),de(!1);break;case"palette_added_success":a=e,Ce(a.arr_p,a.p_len,a.p_cid),pm_refresh(),d(De[Ve]),!0===a.add_saveas&&("no-palettes"===Ge&&(Ge="edit",document.body.className=Ge),!0===Qe&&$(!1),Le(),xe([Xe],[Ae]),q(0,Fe,!0),R());break;case"palette_renamed_success":a=e,Ce(a.arr_p,a.p_len,a.p_cid),d(De[Ve]);break;case"palette_deleted_success":t=e,Ce(t.arr_p,t.p_len,t.p_cid),pm_refresh(),!1!==t.palette_changed&&(!0===Qe&&$(!1),Le(),"no-palettes-left"===t.palette_changed?(d(""),Ge="no-palettes",document.body.className=Ge):!0===t.palette_changed&&(d(De[0]),"is-empty"!==t.arr_n&&(xe(t.arr_n,t.arr_c),q(0,Fe,!0),R())));break;case"find_colors_in_selection":!0===hr&&pm_close(),t=(r=e).arr_add.length,0!==Ke?(!0===rr&&picker_close(),!0===er&&b(!1),x("Add "+t+" colors to current palette?",!0,!1,!1,e=>{!0===e&&he(r.arr_add,r.arr_add,Je,!0)})):x("Not possible! Create a palette!",!1,!1,!1,e=>{});break;case"open_picker":!0===hr&&pm_close(),m(e.picker_color)}var r,t,a,o},He=acquireVsCodeApi(),Ie=200,qe="linear-gradient(135deg, transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)",Ye={},ze=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--dib-min-width").slice(0,-2));let Se=[],Be=[],We=[],Fe=-1,Re=0,Xe="",Ae="",De=[],Ke=0,Ve=-1,je=0,Pe=0,Ue=0,Ge="",Je=-1,Qe=!1,Ze="",er=!1,rr=!1,tr="",ar=0,or=0,nr=!1,dr=0,lr=0,sr=0,ir=0,cr=-1,pr=0,mr=[],ur=0,_r=!1,hr=!1,wr=!1,fr=!1,gr=!1,vr=[],br=0,yr=-1,$r=!1,Er=null,kr=null,Lr=!1,xr=null,Cr=null,Nr=null,Mr=null,Tr=null,Or=null,Hr=null,Ir=null,qr=null,Yr=null,zr=-1,Sr=!1,Br=0,Wr=0,Fr=[],Rr=[],Xr=0,Ar=null,Dr=null,Kr=0,Vr=0,jr=!1,Pr=!0;window.addEventListener("message",e=>Oe(e.data)),He.postMessage({command:"webview_is_loaded"}),Er=document.createElement("div"),Er.id="loading-overlay",document.body.appendChild(Er),de(!0)})();